# Rise and Fall: on_action registration for siege looting

# Map the engine on_action to our named handler(s). This follows the project's
# on_action format (see other files like riseandfall_adventurer_on_actions.txt).
on_siege_looting = {
    on_actions = {
        riseandfall_siege
    }
}

# The handler that will be called when `on_siege_looting` fires. It saves the
# relevant scopes and calls the scripted effect which applies the modifier.
riseandfall_siege = {
    effect = {
        # Save the looted county and barony for use in the scripted effect
        scope:county = { save_scope_as = rf_looted_county }
        scope:barony = { save_scope_as = rf_looted_barony }
        # Save the sieging character (root) as rf_sieger for clarity
        save_scope_as = rf_sieger

        # Call our scripted effect which will add a test province modifier
        riseandfall_on_siege_looting_se = yes
    }
}
