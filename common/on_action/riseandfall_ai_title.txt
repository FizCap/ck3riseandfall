yearly_global_pulse = {
    on_actions = {
        riseandfall_ai_create_kingdoms
        riseandfall_ai_create_duchies
        riseandfall_ai_create_empires
        riseandfall_ai_title_handout
        riseandfall_player_create_kingdoms
        riseandfall_player_create_duchies
        riseandfall_player_grant_duchies
        riseandfall_player_grant_kingdoms
    }
}

on_game_start_after_lobby = {
    on_actions = {
        riseandfall_ai_county_handout
    }
}



riseandfall_ai_create_kingdoms = {
    trigger = {
        has_game_rule = riseandfall_ai_kingdom_creation_enabled
    }
    effect = {
        riseandfall_ai_create_kingdoms_se = yes
    }
}

riseandfall_ai_create_duchies = {
    trigger = {
        has_game_rule = riseandfall_ai_kingdom_creation_enabled
    }
    effect = {
        riseandfall_ai_create_duchies_se = yes
    }
}

riseandfall_ai_create_empires = {
    trigger = {
        has_game_rule = riseandfall_ai_kingdom_creation_enabled
    }
    effect = {
        riseandfall_ai_create_empires_se = yes
    }
}

riseandfall_ai_title_handout = {
    trigger = {
        has_game_rule = riseandfall_ai_kingdom_creation_enabled
    }
    effect = {
        every_ruler = {
            limit = { is_ai = yes }
            riseandfall_ai_title_handout_se = yes
        }
    }
}

riseandfall_ai_county_handout = {
    trigger = {
        has_game_rule = riseandfall_ai_kingdom_creation_enabled
    }
    effect = {
        every_ruler = {
            limit = { is_ai = yes domain_limit_available < -10 }
            riseandfall_grant_counties_se = yes
        }
    }
}

# Player-side on_action handlers: call the scripted effects added in
# common/scripted_effects/riseandfall_player_title_automanage_effects.txt
riseandfall_player_create_kingdoms = {
    effect = {
        every_independent_ruler = {
            limit = { is_ai = no is_landed = yes primary_title.tier >= tier_empire }
            riseandfall_player_create_kingdoms_se = yes
        }
    }
}

riseandfall_player_create_duchies = {
    effect = {
        every_ruler = {
            limit = { is_ai = no is_landed = yes primary_title.tier >= tier_kingdom }
            riseandfall_player_create_duchies_se = yes
        }
    }
}

riseandfall_player_grant_duchies = {
    effect = {
        every_ruler = {
            limit = { is_ai = no is_landed = yes primary_title.tier >= tier_kingdom }
            riseandfall_player_grant_duchies_se = yes
        }
    }
}

riseandfall_player_grant_kingdoms = {
    effect = {
        every_independent_ruler = {
            limit = { is_ai = no is_landed = yes primary_title.tier >= tier_empire }
            riseandfall_player_grant_kingdoms_se = yes
        }
    }
}
