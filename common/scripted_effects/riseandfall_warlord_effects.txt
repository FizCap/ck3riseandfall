riseandfall_warlord_roll_se = {
    trigger_event = { id = warlord.1003 }
}

riseandfall_inherit_warlord_trait_se = {
    # Inherit warlord trait from predecessor if the heir is not an independent ruler
    # Expected scope: heir
    # scope:predecessor should be saved as the predecessor
    if = {
        limit = {
            exists = scope:predecessor
            scope:predecessor = { has_trait = warlord }
            NOT = { is_independent_ruler = yes }  # heir is not an independent ruler
        }
        add_trait = warlord
    }
}

# Called from on_imprison when a liege imprisons one of their vassals.
# root = prisoner, scope:imprisoner = the imprisoning character
riseandfall_warlord_imprisoned_se = {
    # If the prisoner had the warlord trait and was imprisoned by their liege
    # remove warlord and mark them retired so they stop behaving as an
    # independent warlord while imprisoned.
    if = {
        limit = {
            has_trait = warlord
            # Check from the prisoner's scope: is the imprisoner the liege or above?
            target_is_liege_or_above = scope:imprisoner
        }
        remove_trait = warlord
    }
}